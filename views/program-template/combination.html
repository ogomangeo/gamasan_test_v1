<style>
    .combination-content {
        flex: 1;
        padding-top: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .combination-main-container {
        width: 100%;
        height: 900px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: 1fr 1fr;
        gap: 15px;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        box-sizing: border-box;
        margin-bottom: 10px;
    }

    .combination-container-1,
    .combination-container-2,
    .combination-container-3 {
        display: grid;
        gap: 15px;
        background-color: #f9f9f9;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
        padding: 15px;
        padding-bottom: 20px;
        overflow: hidden;
    }

    .combination-container-1 {
        grid-column: span 4;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: 1fr;
    }

    .combination-container-2 {
        grid-column: span 3;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: 1fr;
    }

    .combination-container-2 .combination-input-container:first-child .combination-input-box {
        height: 48%;
        /* box 높이를 50%로 조절 */
    }

    .combination-container-2 .combination-input-container:first-child .combination-title {
        height: 35px;
        /* title 높이도 50%로 조절 */
        margin-bottom: 5px;
        /* 필요한 경우 마진 조절 */
    }

    .combination-container-3 {
        grid-template-columns: 1fr 1fr;
        grid-template-rows: repeat(4, 1fr);
        gap: 10px;
        align-items: center;
        justify-items: center;
        padding: 15px;
    }

    .combination-input-box {
        background-color: #ffffff;
        width: 100%;
        height: calc(100% - 24px);
        display: flex;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    .combination-input-box textarea {
        width: 100%;
        height: 100%;
        padding: 10px;
        font-size: 12px;
        text-align: left;
        border: none;
        outline: none;
        resize: none;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
    }

    .combination-title {
        font-size: 14px;
        margin-bottom: 5px;
        font-weight: bold;
        background-color: #000080;
        color: #ffffff;
        text-align: center;
        border-radius: 4px;
        padding: 5px;
    }

    .combination-container-2 .combination-input-container .combination-title {
        width: 100%;
        height: 35px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background-color: #f0f0f0;
        color: #000000;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-family: Arial, sans-serif;
        font-size: 12px;
        font-weight: bold;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-bottom: 5px;
        padding: 0 5px;
        box-sizing: border-box;
    }

    .combination-container-2 .combination-input-container .combination-title:hover {
        background-color: #e0e0e0;
    }

    .combination-container-2 .combination-input-container .combination-title:active {
        background-color: #d0d0d0;
    }

    .combination-box-5,
    .combination-box-6 {
        width: 100%;
        height: 35px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background-color: #f0f0f0;
        color: #000000;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-family: Arial, sans-serif;
        font-size: 12px;
        font-weight: bold;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.3s;
        margin: 0;
        padding: 0 5px;
        box-sizing: border-box;
    }

    .combination-box-5:hover,
    .combination-box-6:hover {
        background-color: #e0e0e0;
    }

    .combination-box-5:active,
    .combination-box-6:active {
        background-color: #d0d0d0;
    }

    input[type="checkbox"] {
        appearance: none;
        width: 13px;
        height: 13px;
        background-color: #ffffff;
        border: 1px solid #ccc;
        border-radius: 2px;
        margin-right: 5px;
        position: relative;
        top: 2px;
    }

    input[type="checkbox"]:checked::after {
        content: '✓';
        position: absolute;
        top: -3px;
        left: 1px;
        font-size: 13px;
        color: black;
        font-weight: bold;
    }

    table {
        width: 100%;
        height: 100%;
        border-collapse: separate;
        border-spacing: 2px;
    }

    td {
        width: 50%;
        height: auto;
        text-align: center;
        padding: 1px 5px;
        font-size: 12px;
        border: 1px solid #ccc;
    }

    .combination-container-3 .combination-box-5,
    .combination-container-3 .combination-box-6 {
        width: 94%;
        max-width: 200px;
        height: 70px;
        margin: 0;
    }

    .combination-container-3 .combination-box-5[style*="grid-column: span 2"],
    .combination-container-3 .combination-box-6[style*="grid-column: span 2"] {
        width: 100%;
        height: 50px;
        max-width: none;
    }

    .combination-container-1 .combination-input-container:last-child .combination-title {
        background-color: #000080;
        color: #ffffff;
        font-weight: bold;
    }

    .combination-container-1 .combination-input-container:last-child .combination-input-box {
        background-color: #ffffcc;
        border: 1px solid #ccc;
    }

    .combination-container-1 .combination-input-container:last-child textarea {
        background-color: #ffffcc;
        color: #000080;
        font-weight: bold;
    }

    /* 조합하기 버튼 스타일 */
    .combination-box-6[style*="grid-row: 3"] {
        background-color: #000080;
        color: #ffffff;
        /* 텍스트 색상을 흰색으로 변경 */
    }

    /* hover 효과도 같은 계열의 색상으로 변경하고 싶다면 */
    .combination-box-6[style*="grid-row: 3"]:hover {
        background-color: #000066;
        /* 살짝 더 어두운 색상 */
    }

    /* active 효과도 수정 가능 */
    .combination-box-6[style*="grid-row: 3"]:active {
        background-color: #000099;
        /* 클릭했을 때의 색상 */
    }

    /* 순서대로 된 조합 스타일 */
    .sequential-combination {
        background-color: #ffffcc; /* 연한 초록색 */
        font-weight: bold;
    }
    @media (max-width: 1200px) {
        .combination-main-container {
            max-width: 95%;
            height: auto;
        }
    }
</style>

<!-- KeyWord Combine Center 코드 -->
<div class="combination-content">
    <div class="combination-main-container">
        <div class="combination-container-1">
            <div class="combination-input-container">
                <div class="combination-title">1번 박스</div>
                <div class="combination-input-box box-1">
                    <textarea oninput="updateWordCount(this, '1번 박스')" placeholder="키워드를 입력하세요"></textarea>
                </div>
            </div>
            <div class="combination-input-container">
                <div class="combination-title">2번 박스</div>
                <div class="combination-input-box box-1">
                    <textarea oninput="updateWordCount(this, '2번 박스')" placeholder="키워드를 입력하세요"></textarea>
                </div>
            </div>
            <div class="combination-input-container">
                <div class="combination-title">3번 박스</div>
                <div class="combination-input-box box-1">
                    <textarea oninput="updateWordCount(this, '3번 박스')" placeholder="키워드를 입력하세요"></textarea>
                </div>
            </div>
            <div class="combination-input-container">
                <div class="combination-title">4번 박스</div>
                <div class="combination-input-box box-1">
                    <textarea oninput="updateWordCount(this, '4번 박스')" placeholder="키워드를 입력하세요"></textarea>
                </div>
            </div>
            <div class="combination-input-container">
                <div class="combination-title">조합 결과</div>
                <div class="combination-input-box box-7">
                    <textarea readonly oninput="updateWordCount(this, '7번 박스')" placeholder="키워드 조합 결과"></textarea>
                </div>
            </div>
        </div>
        <div class="combination-container-2">
            <div class="combination-input-container">
                <div class="combination-title"><input type="checkbox" class="combination-master-checkbox">2개 조합</div>
                <div class="combination-input-box box-2">
                    <table>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+2<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+3<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+4<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+1<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+2<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+3<span></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="combination-input-container">
                <div class="combination-title"><input type="checkbox" class="combination-master-checkbox">3개 조합</div>
                <div class="combination-input-box box-3">
                    <table>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+2+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+1+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+2+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+1+4<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+3+2<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+2+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+3+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+2+4<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+4+2<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+4+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+4+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+4+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+1+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+1+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+1+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+1+3<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+3+1<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+2+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+3+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+2+3<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+4+1<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+3+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+4+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+3+2<span></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="combination-input-container">
                <div class="combination-title"><input type="checkbox" class="combination-master-checkbox">4개 조합</div>
                <div class="combination-input-box box-4">
                    <table>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+2+3+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+1+2+4<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+2+4+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+1+4+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+3+2+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+2+1+4<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+3+4+2<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+2+4+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+4+2+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+4+1+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>1+4+3+2<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>3+4+2+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+1+3+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+1+2+3<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+1+4+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+1+3+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+3+1+4<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+2+1+3<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+3+4+1<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+2+3+1<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+4+1+3<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+3+1+2<span></td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="combination-checkbox"><span>2+4+3+1<span></td>
                            <td><input type="checkbox" class="combination-checkbox"><span>4+3+2+1<span></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="combination-container-3">
            <button class="combination-box-5" style="grid-column: 1; grid-row: 1;"><input type="checkbox"
                    class="combination-checkbox"><span>전체 선택</span></button>
            <button class="combination-box-5" style="grid-column: 2; grid-row: 1;"><input type="checkbox"
                    class="combination-checkbox"><span>공백 구분</span></button>
            <button class="combination-box-5" style="grid-column: 1; grid-row: 2;">모두 지우기</button>
            <button class="combination-box-5" style="grid-column: 2; grid-row: 2;">다운받기</button>
            <button class="combination-box-6" style="grid-column: 1 / span 2; grid-row: 3;">조합하기</button>
            <button class="combination-box-6" style="grid-column: 1 / span 2; grid-row: 4;">클립보드 복사</button>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script>
    // DOMContentLoaded 이벤트에서 순서대로 된 조합에 스타일 적용
    document.addEventListener('DOMContentLoaded', function () {
        const sequentialCombinations = [
            '1+2', '1+3', '1+4',
            '2+3', '2+4', '3+4',
            '1+2+3', '1+2+4', '1+3+4', '2+3+4',
            '1+2+3+4'
        ];

        // 체크박스가 있는 모든 <span>을 탐색
        document.querySelectorAll('.combination-checkbox + span').forEach(span => {
            const text = span.textContent.trim();
            if (sequentialCombinations.includes(text)) {
                span.parentElement.classList.add('sequential-combination');
            }
        });
    });

    // 단어 수 업데이트 함수
    function updateWordCount(textarea, boxName) {
        const text = textarea.value;
        const words = text.split('\n').filter(word => word.trim().length > 0);
        const wordCount = words.length;
        const title = textarea.parentElement.previousElementSibling;
        title.textContent = `${boxName} (${wordCount})`;
    }

    // 초기 단어 수 설정
    document.querySelectorAll('.combination-input-box textarea').forEach(textarea => {
        const boxName = textarea.parentElement.previousElementSibling.textContent.split(' (')[0];
        updateWordCount(textarea, boxName);
    });

    // 버튼 이벤트 리스너 추가 함수
    function addButtonEventListener(selector, callback) {
        document.querySelector(selector).addEventListener('click', callback);
    }

    // 전체 선택 버튼
    let isAllSelected = false;
    addButtonEventListener('.combination-container-3 .combination-box-5:nth-of-type(1)', function () {
        isAllSelected = !isAllSelected;
        const checkboxes = document.querySelectorAll('.combination-container-2 input[type="checkbox"]');
        checkboxes.forEach(checkbox => checkbox.checked = isAllSelected);
        document.querySelector('.combination-container-3 .combination-box-5:nth-of-type(1) input[type="checkbox"]').checked = isAllSelected;
    });

    // 모두 지우기 버튼
    addButtonEventListener('.combination-container-3 .combination-box-5:nth-of-type(3)', function () {
        document.querySelectorAll('.combination-container-1 .combination-input-box textarea').forEach(textarea => {
            textarea.value = '';
            const boxName = textarea.parentElement.previousElementSibling.textContent.split(' (')[0];
            updateWordCount(textarea, boxName);
        });
    });

    // 공백 구분 체크박스
    addButtonEventListener('.combination-container-3 .combination-box-5:nth-of-type(2)', function (event) {
        const checkbox = this.querySelector('input[type="checkbox"]');
        if (event.target === checkbox) return;
        checkbox.checked = !checkbox.checked;
    });

    // 다운로드 버튼
    addButtonEventListener('.combination-container-3 .combination-box-5:nth-of-type(4)', function () {
        const textareaContent = document.querySelector('.box-7 textarea').value;
        const rows = textareaContent.split('\n').map(row => [row]);

        const worksheet = XLSX.utils.aoa_to_sheet(rows);
        const workbook = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(workbook, worksheet, 'Sheet1');

        XLSX.writeFile(workbook, 'Keyword-combination(feat.GAMASAN).xlsx');
    });

    // 클립보드 복사 버튼
    addButtonEventListener('.combination-box-6[style*="grid-row: 4"]', function () {
        const box7Textarea = document.querySelector('.box-7 textarea');
        box7Textarea.select();
        document.execCommand('copy');
        alert('클립보드에 복사되었습니다.');
    });

    // 텍스트 조합 함수
    function combineTexts(boxTexts, combination, useSpaceSeparator) {
        let result = [''];
        for (let boxIndex of combination) {
            let newResult = [];
            for (let currentText of result) {
                for (let newText of boxTexts[boxIndex - 1]) {
                    let combinedText = currentText + (useSpaceSeparator && currentText ? ' ' : '') + newText;
                    newResult.push(combinedText);
                }
            }
            result = newResult;
        }
        return result;
    }

    // 조합하기 버튼
    document.querySelector('.combination-box-6[style*="grid-row: 3"]').addEventListener('click', function () {
        const boxTexts = [1, 2, 3, 4].map(i =>
            document.querySelector(`.combination-container-1 .combination-input-container:nth-of-type(${i}) textarea`).value
                .split('\n')
                .filter(text => text.trim() !== '')
        );

        const useSpaceSeparator = document.querySelector('.combination-container-3 .combination-box-5:nth-of-type(2) input[type="checkbox"]').checked;

        let combinationResults = [];

        document.querySelectorAll('.combination-container-2 .combination-input-container').forEach((container, containerIndex) => {
            const masterCheckbox = container.querySelector('.combination-title input[type="checkbox"]');
            const checkboxes = container.querySelectorAll('.combination-input-box input[type="checkbox"]');

            checkboxes.forEach(checkbox => {
                if (masterCheckbox.checked || checkbox.checked) {
                    const combination = checkbox.nextElementSibling.textContent.trim().split('+').map(Number);
                    let combinedTexts = combineTexts(boxTexts, combination, useSpaceSeparator);
                    combinationResults = combinationResults.concat(combinedTexts);
                }
            });
        });

        document.querySelector('.box-7 textarea').value = combinationResults.join('\n');
        updateWordCount(document.querySelector('.box-7 textarea'), '조합 결과');
    });

    // 공백 구분 체크박스 변경시 자동 조합
    document.querySelector('.combination-container-3 .combination-box-5:nth-of-type(2) input[type="checkbox"]').addEventListener('change', function () {
        document.querySelector('.combination-box-6[style*="grid-row: 3"]').click();
    });

    // DOMContentLoaded 이벤트 - 수정된 체크박스 이벤트 핸들링
    document.addEventListener('DOMContentLoaded', function () {
        const containers = document.querySelectorAll('.combination-container-2 .combination-input-container');

        containers.forEach(container => {
            let isMouseDown = false;
            let isDragging = false;
            let startCheckbox = null;
            let lastToggledState = null;

            const checkboxes = container.querySelectorAll('.combination-checkbox');
            const masterCheckbox = container.querySelector('.combination-master-checkbox');
            const titleButton = container.querySelector('.combination-title');

            // 체크박스 클릭 이벤트 수정
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('click', function (e) {
                    e.stopPropagation();  // 이벤트 버블링 방지
                    if (!isDragging) {
                        this.checked = !this.checked;  // 상태 토글
                    }
                    updateMasterCheckbox();
                });

                // 체크박스의 상태가 변경될 때마다 호출되는 이벤트
                checkbox.addEventListener('change', function (e) {
                    e.stopPropagation();
                    updateMasterCheckbox();
                });
            });

            // 마스터 체크박스 이벤트
            if (masterCheckbox) {
                masterCheckbox.addEventListener('change', function () {
                    checkboxes.forEach(cb => cb.checked = this.checked);
                    updateMasterCheckbox();
                });

                if (titleButton) {
                    titleButton.addEventListener('click', function (e) {
                        if (e.target !== masterCheckbox) {
                            masterCheckbox.checked = !masterCheckbox.checked;
                            checkboxes.forEach(cb => cb.checked = masterCheckbox.checked);
                            updateMasterCheckbox();
                        }
                    });
                }
            }

            // 드래그 관련 이벤트
            container.addEventListener('mousedown', function (e) {
                if (e.target.type === 'checkbox' || e.target.tagName === 'SPAN') {
                    isMouseDown = true;
                    isDragging = false;
                    startCheckbox = getCheckboxFromEvent(e);
                    if (startCheckbox) {
                        lastToggledState = !startCheckbox.checked;
                        startCheckbox.checked = lastToggledState;
                        updateMasterCheckbox();
                    }
                }
            });

            container.addEventListener('mousemove', function (e) {
                if (isMouseDown) {
                    isDragging = true;
                    const currentCheckbox = getCheckboxFromEvent(e);
                    if (currentCheckbox && currentCheckbox !== startCheckbox) {
                        currentCheckbox.checked = lastToggledState;
                        updateMasterCheckbox();
                    }
                }
            });

            container.addEventListener('mouseup', function () {
                if (!isDragging && startCheckbox) {
                    startCheckbox.checked = lastToggledState;
                }
                isMouseDown = false;
                isDragging = false;
                startCheckbox = null;
                updateMasterCheckbox();
            });

            container.addEventListener('mouseleave', function () {
                if (isMouseDown) {
                    isDragging = true;
                }
                isMouseDown = false;
            });

            // 유틸리티 함수들
            function getCheckboxFromEvent(e) {
                if (e.target.type === 'checkbox') {
                    return e.target;
                } else if (e.target.tagName === 'SPAN') {
                    return e.target.previousElementSibling;
                }
                return null;
            }

            function updateMasterCheckbox() {
                if (masterCheckbox) {
                    const allChecked = Array.from(checkboxes).every(cb => cb.checked);
                    const someChecked = Array.from(checkboxes).some(cb => cb.checked);
                    masterCheckbox.checked = allChecked;
                    masterCheckbox.indeterminate = someChecked && !allChecked;
                }
            }
        });
    });
</script>